<?xml version="1.0" encoding="UTF-8"?>
<domain-models xmlns="http://apps.axelor.com/xml/ns/domain-models"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://apps.axelor.com/xml/ns/domain-models http://apps.axelor.com/xml/ns/domain-models/domain-models_0.9.xsd">

  <module name="network" package="com.axelor.apps.network.db" />

  <entity name="ServerApplication">
  	<many-to-one name="server" ref="com.axelor.apps.network.db.Server" />
  	<many-to-one name="partner" ref="com.axelor.apps.base.db.Partner" required="true"/>
  	<string name="name" required="true"/>
  	<integer name="port" required="true"/>
  	<string name="information" large="true"/>
  	<many-to-one name="domain" ref="com.axelor.apps.network.db.Domain" />
  	<string name="context"/>
  	<boolean name="usePortInUrl" default="false" />
  	<string name="url" search="context,port,domain,server" readonly="true">
	  <![CDATA[
	  	String url = "http://";
	  	if ( domain != null ) { url += domain.getAlias(); }
		else if ( server != null ) { url += server.getInetAddress(); }
		else { url += "localhost"; }
		return url + (usePortInUrl ? ":"+port : "") + (context != null ? "/" + context : "");
	  ]]>
  	</string>
  </entity>

</domain-models>
